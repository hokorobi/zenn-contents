---
title: "Vim æœ¬ä½“ã®è‡ªå‹•è£œå®Œè¨­å®šè©¦ç”¨"
emoji: "ğŸ¦"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Vim"]
published: false
---

:::message
ã“ã®è¨˜äº‹ã¯ [Vimé§…ä¼](https://vim-jp.org/ekiden/) 2025-09-29 ã®è¨˜äº‹ã§ã™ã€‚
:::

Vim æœ¬ä½“ã®è‡ªå‹•è£œå®ŒãŒå……å®Ÿã—ã¦ããŸã®ã§ [VimComplete ãŒ Deprecate ã«ãªã‚Šã¾ã—ãŸã€‚](https://github.com/girishji/vimcomplete/commit/e60622ed084892321b96721edaa0a76c973afce8)
æœ¬ä½“ã®è‡ªå‹•è£œå®Œã«ç§»è¡Œã™ã¹ãä»¥ä¸‹ã®ã‚ˆã†ãªè¨­å®šã§è©¦ã—ã¦ã„ã¾ã™ã€‚
ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã®è£œå®Œå€™è£œã‚’é¸æŠã—ã¦ã‚‚æŒ¿å…¥ã¯ã•ã‚Œãªã„ã¿ãŸã„ãªã®ã§ `<C-l>` ã§æŒ¿å…¥ã€‚

## ä½¿ç”¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³

ãã‚Œãã‚Œã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ãªã©ã¯æ›¸ãã¾ã›ã‚“ã€‚ä½¿ãˆã‚‹çŠ¶æ…‹ã«ãªã£ã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¦ä»¥ä¸‹è¨˜è¿°ã—ã¾ã™ã€‚

- [yegappan/lsp](https://github.com/yegappan/lsp)
- [kana/vim-submode](https://github.com/kana/vim-submode) : ä½¿ã‚ãªã„è¨­å®šã«å¤‰ãˆãŸã‚‰ãªãã¦ã‚‚ã„ã„ã€‚
- [hrsh7th/vim-vsnip](https://github.com/hrsh7th/vim-vsnip) : snippet
- [hrsh7th/vim-vsnip-integ](https://github.com/hrsh7th/vim-vsnip-integ) : vsnip ã‚’ lsp ã§ä½¿ãˆã‚‹ã‚ˆã†ã«ã€‚
- [rafamadriz/friendly-snippets](https://github.com/rafamadriz/friendly-snippets) : vsnip ã§ä½¿ã† snippet é›†ã€‚è‡ªåˆ†ã«åˆã†ã‹ã¯ã‚ã‹ã‚‰ãªã„ã€‚ã¨ã‚Šã‚ãˆãšã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã ã‘ã€‚

## ä½¿ç”¨lsp

- [Deno](https://deno.com)
- [Gopls](https://go.dev/gopls/)
- [Taplo](https://taplo.tamasfe.dev/)

## è‡ªå‹•è£œå®Œã®è¨­å®š

- è‡ªå‹•è£œå®Œã®é–‹å§‹ã¯ 0.2 ç§’å¾Œã«
- `complete` ã®å¤‰æ›´
  - t å‰Šé™¤: è‡ªåˆ†ã®ç’°å¢ƒã§ã¯ã‚¿ã‚°è£œå®Œã§å›ºã¾ã‚‹ã‚ˆã†ã ã£ãŸã®ã§
  - b^5: ã€Œãƒãƒƒãƒ•ã‚¡ãƒªã‚¹ãƒˆå†…ã®ã€ç¾åœ¨èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹åˆ¥ã®ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æ¤œç´¢ã€ã¨ã„ã†ã“ã¨ãªã®ã§é–¢ä¿‚ãªã„ã‚‚ã®ãŒã‚ã‚Šãã†ã ã‹ã‚‰ãƒãƒƒãƒæ•°ã‚’æ¸›ã‚‰ã—ã¦ã¿ã‚‹ã€‚ãƒ˜ãƒ«ãƒ—ã‚’é–‹ã„ã¦ã„ã‚‹ã¨æ—¥æœ¬èªãŒã‚ã‚“ã•ã‹å‡ºã¦ãã‚‹ã¿ãŸã„ã€‚
  - k è¿½åŠ : plantuml, autohotkey ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã§ dictionary ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã®ã§ã€ãã“ã‹ã‚‰è£œå®Œã€‚

```Vim:vimrc
set autocomplete
set autocompletedelay=200
set complete=.,k,w,b^5,u,i
set completeopt-=preview completeopt+=menuone completeopt+=fuzzy
```

## filetype ã”ã¨ã®è¨­å®š

### autohotkey

https://github.com/fincs/SciTE4AutoHotkey/ ã® source/ahk2.standard.api ã¨ source/ahk.keys.api ã‚’çµåˆã—ãŸã‚‚ã®ã‚’ dictionary ã¸ã€‚
https://github.com/AutoHotkey/AutoHotkeyDocs/tree/v2 ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ syntaxgen\CreateAhk2.ahk, syntaxgen\CreateKeys.ahk ã§å†ç”Ÿæˆã—ã¦ã¿ãŸã‘ã©å¤‰ã‚ã£ã¦ã„ãªã‹ã£ãŸã€‚

```Vim:~/_vim/after/ftplugin/autohotkey.vim
setlocal dictionary=~/path/to/autohotkey.txt
```

### go

go ã®è£œå®Œã¯ yegappan/lsp ã®è‡ªå‹•è£œå®Œã‚’ä½¿ã†ã®ã§æœ¬ä½“ã®è£œå®ŒãŒå‡ºãªã„ã‚ˆã†ã« complete ã‚’ç©ºã«ã—ã¦ã¿ãŸã€‚
9.1.1779 ã§ autocmoplete ãŒãƒ­ãƒ¼ã‚«ãƒ«ã§è¨­å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã®ã§ã€ãã†ãªã£ãŸã‚‰å¤‰æ›´ã™ã‚‹ã€‚
[patch 9.1.1779: completion: 'autocomplete' cannot be enabled per buffer Â· vim/vim@0208b3e](https://github.com/vim/vim/commit/0208b3e80a080740ff77a5661d0f65090e317d90)

```Vim:~/_vim/after/ftplugin/go.vim
setlocal complete=
```

### plantuml

plantuml.jar -language ã§å‡ºåŠ›ã—ãŸå†…å®¹ã‚’ dictionary ã¸

```Vim:~/_vim/after/ftplugin/plantuml.vim
setlocal dictionary=~/path/to/plantuml.txt
```

### typescript

go ã¨åŒæ§˜

```Vim:~/_vim/after/ftplugin/typescript.vim
setlocal complete=
```

## yegappan/lsp ã®è¨­å®š

```Vim:lsp.vim
function s:lspSet() abort
  let lspOpts = #{
        \ autoComplete: v:false,
        \ condensedCompletionMenu: v:true,
        \}
  call LspOptionsSet(lspOpts)

  let lspServers = [
        \ #{name: 'deno',
        \   filetype: ['typescript'],
        \   path: 'deno',
        \   args: ['lsp'],
        \ },
        \ #{name: 'gopls',
        \   filetype: 'go',
        \   path: fnamemodify('~/bin/gopls.exe', ':p')->substitute('\', '/', 'g'),
        \   args: ['serve'],
        \   syncInit: v:true,
        \ },
        \ #{name: 'taplo',
        \   filetype: 'toml',
        \   path: 'taplo',
        \   args: ['lsp', 'stdio'],
        \ },
        \]
  call LspAddServer(lspServers)
endfunction
autocmd vimrc User LspSetup call s:lspSet()

function s:LspHas(feature)
  return !lsp#buffer#CurbufGetServer(a:feature)->empty()
endfunction

function s:lspKeymap() abort
  if s:LspHas("hover")
    setl keywordprg=:LspHover
  endif
  if s:LspHas("declaration")
    nnoremap <buffer> gd :LspGotoDeclaration<CR>
    nnoremap <buffer> gD :LspPeekDeclaration<CR>
  endif
  nnoremap <buffer> <Space>al <Cmd>LspDiagShow<CR>
  nnoremap <buffer> <C-]> <Cmd>LspGotoDefinition<CR>
  nnoremap <buffer> <Space>ar <Cmd>LspRename<CR>
  nnoremap <buffer> <Space>aR <Cmd>LspReferences<CR>

  " submode
  call submode#enter_with('lsp', 'n', 'br', '<Space>aj', '<Cmd>LspDiagNext<CR>')
  call submode#enter_with('lsp', 'n', 'br', '<Space>an', '<Cmd>LspDiagNext<CR>')
  call submode#enter_with('lsp', 'n', 'br', '<Space>ak', '<Cmd>LspDiagPrev<CR>')
  call submode#enter_with('lsp', 'n', 'br', '<Space>ap', '<Cmd>LspDiagPrev<CR>')
  call submode#map('lsp', 'n', 'brs', 'j', '<Cmd>LspDiagNext<CR>')
  call submode#map('lsp', 'n', 'brs', 'n', '<Cmd>LspDiagNext<CR>')
  call submode#map('lsp', 'n', 'brs', 'k', '<Cmd>LspDiagPrev<CR>')
  call submode#map('lsp', 'n', 'brs', 'p', '<Cmd>LspDiagPrev<CR>')
endfunction
autocmd vimrc User LspAttached call s:lspKeymap()
```

## vsnip ã®è¨­å®š

```Vim:vsnip.vim
imap <silent><expr> <Tab>
      \ pumvisible() ? '<Down>' :
      \ vsnip#jumpable(1)  ? '<Plug>(vsnip-jump-next)' :
      \ '<Tab>'
smap <silent><expr> <Tab>  vsnip#jumpable(1)  ? '<Plug>(vsnip-jump-next)' : '<Tab>'
imap <silent><expr> <S-Tab>
      \ pumvisible() ? '<Up>' :
      \ vsnip#jumpable(-1)  ? '<Plug>(vsnip-jump-prev)' :
      \ '<C-h>'
smap <expr> <S-Tab> vsnip#jumpable(-1) ? '<Plug>(vsnip-jump-prev)' : '<S-Tab>'
imap <silent><expr> <C-j>
      \ pumvisible() ? '<C-n>' :
      \ '<C-j>'
imap <silent> <C-n> <Down>
imap <silent><expr> <C-k>
      \ pumvisible() ? '<C-p>' :
      \ '<Cmd>normal! D<CR>'
imap <silent> <C-p> <Up>
imap <silent><expr> <C-l>
      \ pumvisible() ? '<C-y>' :
      \ vsnip#expandable() ? '<Plug>(vsnip-expand)' :
      \ vsnip#jumpable(1) ? '<Plug>(vsnip-jump-next)' :
      \ '<C-l>'

" å„ç’°å¢ƒã«å¾“ã£ã¦å¤‰æ›´
let g:vsnip_snippet_dirs = [
      \ expand('~/vimfiles/plug/vsnip'),
      \ expand('~/_vim/path/to/friendly-snippets/snippets'),
      \]
```
