---
title: "incsearch.vim ã‚’ä½¿ã„ãŸã„"
emoji: "ğŸ˜€"
type: "tech"
topics: [Vim]
published: false
published_at: 2015-06-29 01:48
---
[incsearch.vim](https://github.com/haya14busa/incsearch.vim/) ã‚’ä½¿ã„ãŸã„ã¨æ€ã£ã¦ã„ã‚‹ã‘ã‚Œã©ã€æ¨™æº–ã®ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒã®å ´åˆã«ã§ãã¦ã„ã‚‹ã“ã¨ã‚’åŒæ§˜ã«å®Ÿç¾ã™ã‚‹æ–¹æ³•ãŒã‚ã‹ã£ã¦ã„ãªã„ã®ã§ç§»è¡Œã§ãã¦ã„ãªã„ã€‚

å®Ÿç¾æ–¹æ³•ãŒã‚ã‹ã‚‰ãªã„ã®ã¯ã€ä¸‹è¨˜ã®ã‚ˆã†ãªã“ã¨ã€‚

## æ¤œç´¢çµæœã‚’ç½®æ›ç”¨ã«æµç”¨
ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒã‚’å®Ÿè¡Œä¸­ã« \<C-t> ã§æ¤œç´¢æ–‡å­—åˆ—ã‚’ç½®æ›ç”¨ã«æµç”¨ã—ã¦ã„ã‚‹ã€‚

``` vim
" https://raw.githubusercontent.com/cohama/.vim/master/.vimrc
" / ã¨ :s///g ã‚’ãƒˆã‚°ãƒ«ã™ã‚‹ {{{
cnoremap <expr> <C-t> ToggleSubstituteSearch(getcmdtype(), getcmdline())
function! ToggleSubstituteSearch(type, line)
  if a:type ==# '/' || a:type ==# '?'
    let range = GetOnetime('s:range', '%')
    return "\<End>\<C-U>\<BS>" . substitute(a:line, '^\(.*\)', ':' . range . 's/\1', '')
  elseif a:type ==# ':'
    let g:line = a:line
    let [s:range, expr] = matchlist(a:line, '^\(.*\)s\%[ubstitute]\/\(.*\)$')[1:2]
    if s:range ==# '''<,''>'
      call setpos('.', getpos('''<'))
    endif
    return "\<End>\<C-U>\<BS>" . '/' . expr
  endif
endfunction
function! GetOnetime(varname, defaultValue)
  if !exists(a:varname)
    return a:defaultValue
  endif

  let varValue = eval(a:varname)
  execute 'unlet ' . a:varname
  return varValue
endfunction
" }}}
```
## ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‹ã‚‰ã®è²¼ä»˜ã‘
/ æŠ¼ä¸‹å¾Œã«ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‹ã‚‰è²¼ã‚Šä»˜ã‘ã¦ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒã«ä½¿ã£ã¦ã„ã‚‹

