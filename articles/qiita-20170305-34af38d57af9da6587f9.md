---
title: "Paper Plane xUI ã§ peco ã‚’ä½¿ã£ã¦ãƒ•ã‚©ãƒ«ãƒ€é…ä¸‹ã‚’æ¤œç´¢"
emoji: "ğŸ˜€"
type: "tech"
topics: [Peco,PPx]
published: false
published_at: 2017-03-05 13:50
---

[Paper Plane xUI(PPx)ã«ä¸€ç™ºã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰æ¤œç´¢&amp;è¡¨ç¤ºã§ãã‚‹ã€Œpecoã€æ”¹ã‚’ç§»æ¤ã—ãŸ - Qiita](http://qiita.com/wordijp/items/057f71d78384030a1a55) ã«è§¦ç™ºã•ã‚Œã¦è€ƒãˆã¦ã„ãŸã‚‰æ˜”ã‚„ã‚ŠãŸã‹ã£ãŸã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸè©±ã€‚

ã‚„ã‚ŠãŸã‹ã£ãŸã®ã¯ã€howm ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒã—ãŸã„ã¨ã„ã†ã‚‚ã®ã€‚
ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ `*script ppxpero.js9,C:\User\hokorobi\howm,^^=\s` ã¨å®Ÿè¡Œã—ã¦ã‚„ã‚‹ã¨ã€howm ã®ã‚¿ã‚¤ãƒˆãƒ«ãŒ peco ã«åˆ—æŒ™ã•ã‚Œã‚‹ã®ã§ migemogrep ã§ migemo ã‚‚ä½¿ãˆã‚‹ã€‚ï¼ˆã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã¯ ^ ãŒã‚¨ã‚¹ã‚±ãƒ¼ãƒ—æ–‡å­—ãªã®ã§äºŒå€‹ç¶šã‘ã‚‹ï¼‰
`*script ppxpero.js9` ã§ ã€Œpecoã€æ”¹ã®ã‚ˆã†ã«ã‚‚å‹•ãã€‚

``` js:ppxpero.js9
//!*script
// ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ peco ã§é¸æŠã—ã¦ã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ã
// PPx 1.53+3 x64 + Script Module R16

var args = PPx.Arguments;

// ç¬¬ä¸€å¼•æ•°ãŒã‚ã‚Œã°ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹•ã—ã¦æ¤œç´¢
// ç§»å‹•ã›ãšã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã™ã‚‹ã¨
// - peco ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹è¡¨ç¤ºãŒé•·ããªã‚Šã™ãã‚‹ã€‚
// - ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¨è¡Œæ•°ã‚’åˆ†é›¢ã™ã‚‹éš›ã« : ã‚’åˆ†å‰²æ–‡å­—ã«ä½¿ã£ã¦ã„ã‚‹ã®ã§ C:\ ãªã©ã®å‡¦ç†ãŒé¢å€’ã€‚
if (args.length > 0) {
    var dir = args(0);
    PPx.Execute('*jumppath ' + dir);
}

// ç¬¬äºŒå¼•æ•°ãŒã‚ã‚Œã° peco ã®è¡¨ç¤ºå¯¾è±¡ã‚’çµã‚Šè¾¼ã¿
var ptquery = '.';
if (args.length > 1) {
    ptquery = args(1);
}

// ç¬¬ä¸‰å¼•æ•°ãŒã‚ã‚Œã° peco ã®åˆæœŸã‚¯ã‚¨ãƒªã¨ã™ã‚‹
var pecoquery = '';
if (args.length > 2) {
    pecoquery = ' --query ' + args(2);
}

// peco å®Ÿè¡Œ
// peco ã®å‡ºåŠ›ã¯ UTF-8 ãªã®ã§ CP932 ã¸å¤‰æ›ã—ã¦ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸æ¸¡ã™
// FIXME: æ–‡å­—ã‚³ãƒ¼ãƒ‰å¤‰æ›ã« iconv ã‚ˆã‚Šè»½ã„æ–¹æ³•ã‚’ä½¿ã„ãŸã„
// FIXME: ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚’æ±šã—ãŸããªã„
PPx.Execute('%Obsq pt /nogroup /nocolor /S /e ' + ptquery + ' .\ | peco' + pecoquery + ' | iconv -f UTF-8 -t CP932 | clip');

// ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¨è¡Œæ•°ã‚’å–ã‚Šå‡ºã—ã¦ã‚¨ãƒ‡ã‚£ã‚¿ã¸æ¸¡ã™
var path_line = PPx.Clipboard;
if (path_line == '') {
    PPx.Quit(-1);
}
var list = path_line.split(':');
PPx.Execute("%'editor' %'editorL'" + list[1] + ' "' + list[0] + '"');


```

