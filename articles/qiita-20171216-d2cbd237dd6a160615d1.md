---
title: "Vim ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰ Vim script ã‚’è¿½ã†"
emoji: "ğŸ˜€"
type: "tech"
topics: [Vim]
published: false
published_at: 2017-12-16 16:22
---
ç’°å¢ƒã¯ Windowsã€‚

ãã‚ãã‚ Python2 ã¨ã¯ãŠåˆ¥ã‚Œã—ã¦ Python3 ã¨ã ã‘ä»²è‰¯ãã—ãŸã„ã®ã§ã€Python2 ã®ãªã„ç”Ÿæ´»ã‚’é€ã£ã¦ã„ãŸã¨ã“ã‚ã€Vim ã‹ã‚‰ gist ã‚’ç·¨é›†ã§ãã‚‹ä¾¿åˆ©ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã® [vim-gista](https://github.com/lambdalisue/vim-gista) ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã£ãŸã€‚

```
function gista#autocmd#call[14]..<SNR>159_on_BufWriteCmd[13]..gista#command#patch#call[14]..gista#resource#remote#patch[17]..gista#resource#remote#get[19]..159[9]..157[34]..<SNR>137_request[33]..166 ã®å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ:
è¡Œ   94:
E887: ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ç„¡åŠ¹ã§ã™,ã”ã‚ã‚“ãªã•ã„. Python ã® site ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã›ã‚“ã§ã—ãŸ.
```

`gista#autocmd#call[14]` ã¯ gista#autocmd#call ã® 14 è¡Œç›®ã‚’èª­ã‚ã°ã„ã„ã®ã˜ã‚ƒã‚ï¼Ÿã€€ãã‚‰ã„ã¯ã‚ã‹ã‚‹ã®ã ã‘ã‚Œã©æœ«å°¾ã¨ã‹è¿½ã†ã®è¾›ã™ãã‚‹â€¦â€¦ã¨æ€ã£ã¦ã„ãŸã€‚

Vimmer ã®é›†ã† [Meguro.vim](https://megurovim.connpass.com/) ã§è³ªå•ã—ãŸã¨ã“ã‚ thinca ã•ã‚“ã«ä¸€ç¬ã§ä¾¿åˆ©æƒ…å ±ã‚’ã„ãŸã ã‘ãŸã€‚

ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã® `157[34]` ã‹ã‚‰ `:verbose function {157}` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å¯¾è±¡ã®é–¢æ•°ãŒã‚ã‹ã‚‹ã€‚

```
   function 157(...) abort dict
æœ€å¾Œã«ã‚»ãƒƒãƒˆã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆ: ~\_vim\dein\repos\github.com\lambdalisue\vim-gista\autoload\vital\__vim_gista__\Web\API\GitHub.vim
1    if a:0 == 3
2      let settings = a:3$
3      let settings.method = get(settings, 'method', a:1)$
4      let settings.url = get(settings, 'url', a:2)$
5    elseif a:0 == 2$
6      if type(a:2) == type({})$
7        let settings = a:2$
8        let settings.method = get(settings, 'method', 'GET')$
9        let settings.url = get(settings, 'url', a:1)$
10     else$
11       let settings = {}$
12       let settings.method = get(settings, 'method', a:1)$
13       let settings.url = get(settings, 'url', a:2)$
14     endif$
15   else$
16     let settings = a:1$
17   endif$
18   let settings.url = settings.url =~# '^https\?://' ? settings.url : self.get_absolute_url(settings.url)$
21   let settings.headers = extend( s:_get_header(self.get_token()), get(settings, 'headers', {}),)$
25   " Most of API request is json$
26   let settings.headers = extend({ 'Content-Type': 'application/json',}, settings.headers)$
30   " neovim currently does not support 'bindeval'$
31   if has('nvim')$
32     let settings.client = ['curl', 'wget']$
33   endif$
34   return s:HTTP.request(settings)$
   endfunction
```

ãƒ•ã‚¡ã‚¤ãƒ«åã ã‘ãªã‚‰ `:filter 157 scriptnames` ã§ã€‚

```
157: ~\_vim\dein\repos\github.com\lambdalisue\vim-gista\autoload\gista\util.vim
```

ä¾¿åˆ©ã€‚

~~ã‚“ã§ã€çµå±€ [Vimã‹ã‚‰Python 3\.xã‚’ä½¿ã†ã¨è½ã¡ã‚‹ã“ã¨ãŒã‚ã‚‹ Â· Issue \#610 Â· vim\-jp/issues](https://github.com/vim-jp/issues/issues/610) ã¨åŒã˜åŸå› ã§ Python2 ã¨ã®ä»˜ãåˆã„ãŒç¶šãã¨ã„ã†ã“ã¨ã‹ãªï¼Ÿ~~
è‡ªåˆ†ãŒæ„å›³ã—ã¦å…¥ã‚ŒãŸ Python2 ä»¥å¤–ãŒæ‚ªã•ã‚’ã—ã¦ã„ãã†ã€‚

