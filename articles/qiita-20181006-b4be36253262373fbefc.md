---
title: "asyncomplete.vim ã‚’ä½¿ã„å§‹ã‚ãŸ"
emoji: "ğŸ˜€"
type: "tech"
topics: [Vim]
published: false
published_at: 2018-10-06 21:07
---
ã‚‚ã¨ã‚‚ã¨ [deoplete.nvim](https://github.com/Shougo/deoplete.nvim) ã‚’ä½¿ã£ã¦ã„ãŸã‘ã‚Œã©ã€ç§ã®ç’°å¢ƒï¼ˆWindows10 Vim8ï¼‰ã ã¨è£œå®Œå€™è£œãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§ä¸€ç§’ç¨‹åº¦æ™‚é–“ãŒã‹ã‹ã‚‹ãŸã‚ [asyncomplete.vim](https://github.com/prabirshrestha/asyncomplete.vim) ã«ç§»ã‚Šã¾ã—ãŸã€‚

ãã“ãã“å¿«é©ã«ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã¾ã§è©¦è¡ŒéŒ¯èª¤ãŒå¿…è¦ã ã£ãŸã®ã§ã€ãã“ã‚‰ã¸ã‚“ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ã¿ã¾ã™ã€‚
å…¨ä½“ã®ã‚³ãƒ¼ãƒ‰ã¯æœ«å°¾ã¸ã€‚

## å‰æ

* dein.vim ã‚’ä½¿ã£ã¦ toml ã§è¨­å®šã‚’æ›¸ã„ã¦ã„ã¾ã™ã€‚
* lsp ã‚’ä½¿ã†ãŸã‚ã«ã€python ã¯ pyls ã‚’ã€golang ã¯ go-langserver ã‚’åˆ¥é€”ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™ã€‚

### asyncomplete.vim é–¢é€£ã®ä¾å­˜é–¢ä¿‚

* asyncomplete.vim
  * asyncomplete-buffer.vim
  * asyncomplete-file.vim 
  * asyncomplete-necosyntax.vim
     * Shougo/neco-syntax
  * asyncomplete-necovim.vim
     * Shougo/neco-vim
  * prabirshrestha/asyncomplete-neosnippet.vim
     * Shougo/neosnippet.vim
         * Shougo/neosnippet-snippets
         * honza/vim-snippets
  * prabirshrestha/asyncomplete-lsp.vim
     * prabirshrestha/vim-lsp
         * prabirshrestha/async.vim

### vimrc ã§ augroup vimrc ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã€‚

```vim
augroup vimrc
  autocmd!
augroup END
```

## ã‚³ãƒ¡ãƒ³ãƒˆ

* æ•°ãƒ¡ã‚¬ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†ã“ã¨ãŒã‚ã‚Šã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦è£œå®Œå€™è£œã®åé›†ãŒã•ã‚Œãªã„ã‚ˆã†ã«ã€æŒ‡å®šã—ãŸ filetype ã ã‘ã§è£œå®ŒãŒå‹•ãã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

```vim
  let g:asyncomplete_enable_for_all = 0
  autocmd vimrc FileType autohotkey,autoit,cfg,git,go,groovy,java,javascript,python,snippet,toml,vim,vb,xsl call asyncomplete#enable_for_buffer()
```

* `'whitelist': ['*']`: `whitelist` ã¯æ›¸ã„ã¦ã„ãªã‘ã‚Œã° `['*']` ç›¸å½“ã«ãªã‚‹ã¨æ€ã£ãŸã‘ã‚Œã©ã€ãã†ãªã‚‰ãªã„ã“ã¨ã‚‚ã‚ã‚‹ã‚ˆã†ãªã®ã§ãã‚Œãã‚Œæ›¸ã„ã¦ã„ã¾ã™ã€‚


## å…¨ä½“ã‚³ãƒ¼ãƒ‰

```
[[plugins]]
repo = 'prabirshrestha/asyncomplete.vim'
on_ft = ['autohotkey', 'autoit', 'cfg', 'git', 'go', 'groovy', 'java', 'javascript', 'python', 'snippet', 'toml', 'vim', 'vb', 'xsl']
hook_add = '''
  " let g:asyncomplete_log_file = expand('~/_vim/.asyncomplete/log.log')
  let g:asyncomplete_enable_for_all = 0
  autocmd vimrc FileType autohotkey,autoit,cfg,git,go,groovy,java,javascript,python,snippet,toml,vim,vb,xsl call asyncomplete#enable_for_buffer()
'''

[[plugins]]
repo = 'prabirshrestha/asyncomplete-buffer.vim'
on_ft = ['autohotkey', 'autoit', 'cfg', 'git', 'go', 'groovy', 'java', 'javascript', 'python', 'snippet', 'toml', 'vim', 'vb', 'xsl']
hook_source = '''
  autocmd vimrc User asyncomplete_setup call asyncomplete#register_source(asyncomplete#sources#buffer#get_source_options({
      \ 'name': 'buffer',
      \ 'priority': 5,
      \ 'whitelist': ['*'],
      \ 'completor': function('asyncomplete#sources#buffer#completor'),
      \ }))
'''

[[plugins]]
repo = 'prabirshrestha/asyncomplete-file.vim'
on_ft = ['autohotkey', 'autoit', 'cfg', 'git', 'go', 'groovy', 'java', 'javascript', 'python', 'snippet', 'toml', 'vim', 'vb', 'xsl']
hook_source = '''
  autocmd vimrc User asyncomplete_setup call asyncomplete#register_source(asyncomplete#sources#file#get_source_options({
      \ 'name': 'file',
      \ 'priority': 3,
      \ 'whitelist': ['*'],
      \ 'completor': function('asyncomplete#sources#file#completor'),
      \ }))
'''

[[plugins]]
repo = 'prabirshrestha/asyncomplete-necosyntax.vim'
on_ft = ['autohotkey', 'autoit', 'cfg', 'git', 'go', 'groovy', 'java', 'javascript', 'python', 'snippet', 'toml', 'vim', 'vb', 'xsl']
depends = ['neco-syntax']
hook_source = '''
  autocmd vimrc User asyncomplete_setup call asyncomplete#register_source(asyncomplete#sources#necosyntax#get_source_options({
      \ 'name': 'necosyntax',
      \ 'priority': 7,
      \ 'whitelist': ['*'],
      \ 'completor': function('asyncomplete#sources#necosyntax#completor'),
      \ }))
'''

[[plugins]]
repo = 'Shougo/neco-syntax'
lazy = 1

[[plugins]]
repo = 'prabirshrestha/asyncomplete-necovim.vim'
on_ft = ['vim']
depends = ['neco-vim']
hook_source = '''
  autocmd vimrc User asyncomplete_setup call asyncomplete#register_source(asyncomplete#sources#necovim#get_source_options({
      \ 'name': 'necovim',
      \ 'whitelist': ['vim'],
      \ 'priority': 10,
      \ 'completor': function('asyncomplete#sources#necovim#completor'),
      \ }))
'''

[[plugins]]
repo = 'Shougo/neco-vim'
lazy = 1

[[plugins]]
repo = 'prabirshrestha/asyncomplete-neosnippet.vim'
on_ft = ['autohotkey', 'autoit', 'cfg', 'git', 'go', 'groovy', 'java', 'javascript', 'python', 'snippet', 'toml', 'vim', 'vb', 'xsl']
depends = ['neosnippet.vim']
hook_source = '''
  autocmd vimrc User asyncomplete_setup call asyncomplete#register_source(asyncomplete#sources#neosnippet#get_source_options({
      \ 'name': 'neosnippet',
      \ 'whitelist': ['*'],
      \ 'priority': 9,
      \ 'completor': function('asyncomplete#sources#neosnippet#completor'),
      \ }))
'''

[[plugins]]
repo = 'Shougo/neosnippet.vim'
depends = 'neosnippet-snippets'
hook_source = '''
  " <TAB>: completion.
  inoremap <expr> <S-TAB> pumvisible() ? '<C-p>' : '<S-TAB>'

  " Plugin key-mappings.
  imap <C-k> <Plug>(neosnippet_expand_or_jump)
  smap <C-k> <Plug>(neosnippet_expand_or_jump)

  " SuperTab like snippets behavior.
  imap <expr> <TAB> neosnippet#jumpable() ? '<Plug>(neosnippet_expand_or_jump)' : pumvisible() ? '<C-n>' : '<TAB>'
  smap <expr> <TAB> neosnippet#jumpable() ? '<Plug>(neosnippet_expand_or_jump)' : '<TAB>'

  let g:neosnippet#data_directory = expand('~/_vim/.neosnippet')

  " Tell Neosnippet about the other snippets
  " gosnippets ã¯ vim-go ãŒã†ã¾ã„ã“ã¨ã‚„ã£ã¦ãã‚Œã‚‹ã¯ãšã ã‘ã©ã€ãªã‚“ã‹ã†ã¾ãã„ã‹ãªã„ã®ã§ç›´æ¥è¿½åŠ ã€‚
  let g:neosnippet#snippets_directory = [
        \   '~/vimfiles/snippets',
        \   '~/_vim/dein/repos/github.com/honza/vim-snippets/snippets/',
        \   '~/_vim/dein/repos/github.com/fatih/vim-go/gosnippets/snippets/',
        \ ]
'''

[[plugins]]
repo = 'Shougo/neosnippet-snippets'

[[plugins]]
repo = 'honza/vim-snippets'
# snippets ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’ä½¿ã†ã®ã§ runtimepath ã¸è¿½åŠ ã—ãªã„
rtp = ''

[[plugins]]
repo = 'prabirshrestha/async.vim'

[[plugins]]
repo = 'prabirshrestha/vim-lsp'
hook_add = '''
  " hook_source ã ã¨ã†ã¾ãå‹•ã‹ãªã‹ã£ãŸ

  if executable('pyls')
      autocmd vimrc User lsp_setup call lsp#register_server({
          \ 'name': 'pyls',
          \ 'cmd': {server_info->['pyls']},
          \ 'whitelist': ['python'],
          \ })
  endif
  if executable('go-langserver')
    au User lsp_setup call lsp#register_server({
        \ 'name': 'go-langserver',
        \ 'cmd': {server_info->['go-langserver', '-gocodecompletion']},
        \ 'whitelist': ['go'],
        \ })
   endif
'''

[[plugins]]
repo = 'prabirshrestha/asyncomplete-lsp.vim'
on_ft = ['python', 'go']
depends = ['asyncomplete.vim', 'vim-lsp']

```

