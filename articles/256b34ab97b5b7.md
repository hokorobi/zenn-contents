---
title: "dein.vim の hooks_file を使って vimrc を書き換えた話"
emoji: "🕌"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Vim"]
published: true
---

この記事は [Vim駅伝](https://vim-jp.org/ekiden/) 2023-05-01 の記事です。

dein.vim にプラグインごとの設定を他のファイルから読み込む hooks_file が実装された（[Add hooks_file](https://github.com/Shougo/dein.vim/commit/f8091f4119f23611a10667cba3851aad149a6a2e)）ので toml に書いていた設定を別ファイルに切り出してみました。
[hooks_file を使うように変更したコミット](https://github.com/hokorobi/vimfiles_pub/commit/b781da42af6c4b6ac16eb2a7701a6bf712cff1be)

- toml を使うのをやめてみました。
  - `dein#toml#syntax()` や [thinca/vim-partedit](https://github.com/thinca/vim-partedit) を使うことになるので。
  - Vim script だと行継続がちょっと嫌なので Vim9 script にしました。
  - ftplugin.toml は dein.vim の hooks_file で読み込むように変更してみました。
- ddc.vim で filetype = vim の補完ができるようにしているつもりだけど、ポップアップ表示がされなくなっていた。
  hooks_file の影響ではないと思うけど要修正。
- hooks_file で読み込むファイルの hook_source には vim9script は使えないっぽい？
  まだそこまで dein.vim のコードは読めてない。

